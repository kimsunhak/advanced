## JWP-advanced

- 로그 추적기
  - 요구사항:
    > - 모든 PUBLIC 메서드의 호출과 응답 정보를 로그로 출력
    > - 애플리케이션의 흐름을 변경하면 안됨
    >  - 로그를 남긴다고 해서 비즈니스 로직의 동작에 영향을 주면 X
    > - 메서드 호출에 걸린 시간
    > - 정상 흐름과 예외 흐름 구분
    >  - 예외 발생시 예외 정보가 남아야 함
    > - 메서드 호출의 깊이 표현
    >  - HTTP 요청을 구분
    >  - 트랜잭션 ID (DB 트랜잭션 X)
    
  - 로그 추적기 V1
  
  - 로그 추적기 V2
  
  
  
- 쓰레드 로컬 - ThreadLocal
  - 필드 동기화

  - 필드 동기화 - 동시성 문제
    
    > 동시성 문제
    > `FieldLogTrace` 는 싱글톤으로 등록된 스프링 빈 -> 이 객체의 인스턴스가 애플리케이션에 딱 1 존재한다는 뜻
    > 이렇게 하나만 있는 인스턴스의 `FieldLogTrace.traceIdHolder` 필드를 여러 쓰레드가 동시에 접근하기 때문에 문제가 발생
    > 실무에서도 자주 있는 동시성 문제
    >
    > **동시성 문제는 값을 읽기만 하면 발생하지 않음 -> 어디선가 값을 변경하기 때문에 발생**
    
  - ThreadLocal

    > 쓰레드 로컬은 해당 쓰레드만 접근할 수 있는 특별한 저장소를 말함.



[참고 자료](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89%ED%8E%B8/dashboard) : 스프링 핵심 원리 - 고급편